## 解码王红包

解码王红包是一种帮助客户推广（广告位），提升用户抢红包乐趣与体验的一种红包类型，解码王红包的核心在于**编码** 和 **解码**

### 编码

客户能够在发红包的时候为红包添加一个数字密码,长度取决于红包的金额，添加的方式为用户手动输入

- 百元红包 三位数字
- 千元红包 四位数字

### 解码

但用户进入到红包页面后，可以获得一次解码的机会，解码的过程是服务器帮用户生成一个随机的数字密码。

如果和目标密码匹配，即抢到红包，如果匹配失败，能够分享给自己的好友，再次进行解码。假设 A 解码失败，并将红包分享给了好友 B，那么一旦 B 解码成功，将会由 AB 两者平分红包。

任何人生成的错误数字密码都会进入到一个废弃池中，不会再次被人生成，也就是说随着红包的进一步解码，成功率将会不断升高，这个成功率也会显示到前端页面之中，对用户产生更高的刺激与兴奋感。

### 分享

分享的过程可以依赖红包的 query，用户分享的红包地址上会拥有一个 form 字段，用来表示这个红包的分享者。

### 拆分

**难点（后端）**

由于我们目前已经拥有一个红包系统，那么后台势必要将这个红包融入到系统之中，而这个红包的特殊之处在于，在某些状态下（抢到该红包并且没有分享人），这个红包不需要拆分，在某些状态下，这个红包需要被拆分成两份。

所以后端应该一开始就拆分成两份，在不需要拆分的时候直接给该用户配送两份红包。
还是作为一份红包创建，在需要拆分的时候进行两次派发。

### 耗时

下面列出一些我认为可能相对耗费时间较多的点（前端）

- 显示随机数字密码的动画 需要一个滚动并且随序列逐渐显示的动画 增加用户的刺激感（特别是前面的数字已经中的情况）
- 两个端的表单
- 移动端的支付 利用先充值在再钱的方案，需要对以前的移动端支付模块进行重写，并且这个微信支付模块还未使用过，可能会出现问题。

### Feature(可能)

我认为可能需要的一些功能

- 在红包解码初期，后端避免直接快速出密码的情况，比如设置一个阈值，在解码人数少于 100 人时，不会出密码，增加解码时间，提升广告的曝光量
